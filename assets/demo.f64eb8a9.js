import"./index.e9091200.js";import{d as m,c as d,a as g}from"./runtime-core.esm-bundler.6c7eec45.js";function p(t,{maxCount:e=3,retryInterval:o=1e3,onRetry:u=r=>{},onFailed:a=(r,i)=>{}}={}){return function(...i){return new Promise((l,f)=>{let s=0;const h=this;c();function c(){u(++s),t.call(h,...i).then((...n)=>{l(...n)}).catch((...n)=>{s>=e?(a(s,n),f(...n)):(a(s,n),setTimeout(c,o))})}})}}function y(t){return console.log("fetching",t),fetch(`https://httpbin.org/status/200,500,400?keywords=${t}`,{method:"GET",mode:"cors"}).then(e=>{if(e.status>=200&&e.status<300)return{data:`result for ${t}`};throw new Error(e.statusText||`request failed with status ${e.status}`)})}const b=p(y,{maxCount:3,retryInterval:1e3,onFailed(t,[e]){let o=e;e instanceof Error&&(o=e.message),console.log(`\u7B2C${t}\u6B21\u5931\u8D25\u4E86\uFF1A`,o)},onRetry(t){console.log(`\u7B2C${t}\u6B21\u5C1D\u8BD5...`)}});var R=m({setup(){return()=>d("button",{onClick:async()=>{const t=await b("abc");console.log("fetched",t)}},[g("Get something unstable")])}});export{R as default};
