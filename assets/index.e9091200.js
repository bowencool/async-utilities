class d extends Error{}d.prototype.name="AbortError";class l extends Error{}l.prototype.name="TimeoutError";function A(a,e={}){return function(...b){return new Promise((c,s)=>{var i,f;let r,o=!1;function u(){e.alwaysPendingWhenAborted||s(new d("aborted")),o=!0,n()}(f=(i=e.signal)==null?void 0:i.addEventListener)==null||f.call(i,"abort",u);function E(){e.alwaysPendingWhenAborted||s(new l(`timeout of ${e.timeout}ms`)),o=!0,n()}typeof e.timeout=="number"&&e.timeout>0&&(r=setTimeout(E,e.timeout));function n(){var t,m;typeof r!="undefined"&&(clearTimeout(r),r=void 0),(m=(t=e.signal)==null?void 0:t.removeEventListener)==null||m.call(t,"abort",u)}a.call(this,...b).then((...t)=>{o||c(...t),n()}).catch((...t)=>{o||s(...t),n()})})}}export{d as A,l as T,A as a};
