import{a as u,T as l,A as s}from"./index.e9091200.js";import{d as i,r as c,c as n,F as d,a}from"./runtime-core.esm-bundler.6c7eec45.js";function f(e=1e3){return new Promise(r=>{console.log(`The task will be completed in ${e}ms`),setTimeout(()=>r(`The result in ${e}ms`),e)})}var E=i({setup(){let e;const r=c({loading:!1,error:null,data:""});return()=>n(d,null,[n("p",null,[a("fetch\u3001xhr \u539F\u751F\u5C31\u53EF\u4EE5\u53D6\u6D88\uFF0C\u6240\u4EE5\u8FD9\u91CC\u5C31\u4E0D\u7528 HTTP \u505A\u793A\u4F8B\u4E86")]),n("button",{onClick:async function(){if(!r.loading){e=new AbortController;try{r.loading=!0,r.error=null,r.data=await u(f,{timeout:1500,signal:e.signal})(1400+Math.floor(Math.random()*200))}catch(t){console.log(t.name,t instanceof l,t instanceof s),r.error=t,r.data=""}finally{r.loading=!1}}},disabled:r.loading?!0:void 0},[r.loading?"loading...":"start"]),r.loading&&n("button",{onClick:()=>{e.abort()}},[a("stop")]),n("pre",null,[JSON.stringify(r,(t,o)=>o instanceof Error?o.message:o,2)])])}});export{E as default};
