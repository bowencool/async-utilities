class u extends Error{}u.prototype.name="AbortError";class f extends Error{}f.prototype.name="TimeoutError";function d(t,e={}){return function(...l){return new Promise((m,n)=>{let i,r=!1;function a(){r||(e.alwaysPendingWhenAborted||n(new u("aborted")),r=!0)}function b(){r||(e.alwaysPendingWhenAborted||n(new f(`timeout of ${e.timeout}ms`)),r=!0)}typeof e.timeout=="number"&&e.timeout>0&&(i=setTimeout(b,e.timeout)),e.signal&&e.signal.addEventListener("abort",a);function s(){i&&clearTimeout(i),e.signal&&e.signal.removeEventListener("abort",a)}t.call(this,...l).then((...o)=>{r||m(...o),s()}).catch((...o)=>{n(...o),s()})})}}export{u as A,f as T,d as a};
