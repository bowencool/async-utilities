import{d as g,c as i,a as o,b as h,f as a,e as y,o as f}from"./app.00a19c4d.js";function w(n,{maxCount:s=3,retryInterval:t=1e3,onRetry:k=l=>{},onFailed:c=(l,u)=>{}}={}){return function(...u){return new Promise((b,m)=>{let e=0;const d=this;r();function r(){k(++e),n.call(d,...u).then((...p)=>{b(...p)}).catch((...p)=>{e>=s?(c(e,p),m(...p)):(c(e,p),setTimeout(r,t))})}})}}function v(n){return console.log("fetching",n),fetch(`https://httpbin.org/status/200,500,400?keywords=${n}`,{method:"GET",mode:"cors"}).then(s=>{if(s.status>=200&&s.status<300)return{data:`result for ${n}`};throw new Error(s.statusText||`request failed with status ${s.status}`)})}const _=w(v,{maxCount:3,retryInterval:1e3,onFailed(n,[s]){let t=s;s instanceof Error&&(t=s.message),console.log(`\u7B2C${n}\u6B21\u5931\u8D25\u4E86\uFF1A`,t)},onRetry(n){console.log(`\u7B2C${n}\u6B21\u5C1D\u8BD5...`)}});var T=g({setup(){return()=>i("button",{onClick:async()=>{const n=await _("abc");console.log("fetched",n)}},[o("Get something unstable")])}});const x=a("h2",{id:"intro",tabindex:"-1"},[o("Intro "),a("a",{class:"header-anchor",href:"#intro","aria-hidden":"true"},"#")],-1),A=a("p",null,"\u4E00\u4E2A\u53EF\u4EE5\u8BA9\u5F02\u6B65\u4EFB\u52A1\u652F\u6301\u91CD\u8BD5\u7684\u9AD8\u9636\u51FD\u6570\u3002",-1),R=a("p",null,"A higher-order function that allows asynchronous tasks to support retries.",-1),C=a("h2",{id:"demo",tabindex:"-1"},[o("Demo "),a("a",{class:"header-anchor",href:"#demo","aria-hidden":"true"},"#")],-1),$=a("blockquote",null,[a("p",null,"\u4EE5\u4E0B Demo \u4EE5\u7F51\u7EDC\u8BF7\u6C42\u4E3A\u4F8B\uFF0C\u6253\u5F00 Devtool \u67E5\u770B\u6548\u679C\u3002"),a("p",null,"The following demo takes a network request as an example and opens Devtool to see the effect.")],-1),I=y("",3),q='{"title":"Intro","description":"","frontmatter":{},"headers":[{"level":2,"title":"Intro","slug":"intro"},{"level":2,"title":"Demo","slug":"demo"},{"level":2,"title":"Types","slug":"types"}],"relativePath":"../src/withRetryAsync/readme.md","lastUpdated":1632281211386}',P={},D=Object.assign(P,{setup(n){return(s,t)=>(f(),h("div",null,[x,A,R,C,$,i(T),I]))}});export{q as __pageData,D as default};
