import{d as n,e as s,f as a,o as t,c as p,b as e,a as o}from"./app.291d2ca8.js";const c=function(n,{maxCount:s=3,retryInterval:a=500,onRetry:t=(n=>{})}={}){return function(...p){return new Promise(((e,o)=>{let c=0;const l=this;!function r(){t(c),n.call(l,...p).then(((...n)=>{e(...n)})).catch(((...n)=>{++c>=s?o(...n):setTimeout(r,a)}))}()}))}}((function(n){return console.log("fetching",n),fetch(`https://httpbin.org/status/200,500,400?keywords=${n}`,{method:"GET",mode:"cors"}).then((s=>{if(s.status>=200&&s.status<300)return{data:`result for ${n}`};throw new Error(s.statusText)}))}),{maxCount:3,retryInterval:1e3,onRetry(n){console.log("第%d次尝试",n+1)}});var l=n({setup:()=>()=>s("fieldset",null,[s("legend",null,[a("查询场景")]),s("button",{onClick:async()=>{const n=await c("abc");console.log("fetched",n)}},[a("Get something same(useSamePromise)")])])});const r=e("h2",{id:"intro",tabindex:"-1"},[a("Intro "),e("a",{class:"header-anchor",href:"#intro","aria-hidden":"true"},"#")],-1),u=e("p",null,"自动重试。",-1),i=e("h2",{id:"demo",tabindex:"-1"},[a("Demo "),e("a",{class:"header-anchor",href:"#demo","aria-hidden":"true"},"#")],-1),k=e("blockquote",null,[e("p",null,"demo 以网络请求为例，请打开 Devtool 查看效果")],-1),b=o('',3),d='{"title":"Intro","description":"","frontmatter":{},"headers":[{"level":2,"title":"Intro","slug":"intro"},{"level":2,"title":"Demo","slug":"demo"},{"level":2,"title":"Types","slug":"types"}],"relativePath":"functions/withRetryAsync/readme.md","lastUpdated":1631716027355}',m={};const g=Object.assign(m,{setup:function(n){return(n,a)=>(t(),p("div",null,[r,u,i,k,s(l),b]))}});export{d as __pageData,g as default};
