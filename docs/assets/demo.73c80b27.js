import{d,c as m,a as g}from"./runtime-core.esm-bundler.6c7eec45.js";function p(t,{maxCount:e=3,retryInterval:s=1e3,onRetry:u=r=>{},onFailed:a=(r,c)=>{}}={}){return function(...c){return new Promise((l,f)=>{let o=0;const h=this;i();function i(){u(++o),t.call(h,...c).then((...n)=>{l(...n)}).catch((...n)=>{o>=e?(a(o,n),f(...n)):(a(o,n),setTimeout(i,s))})}})}}function y(t){return console.log("fetching",t),fetch(`https://httpbin.org/status/200,500,400?keywords=${t}`,{method:"GET",mode:"cors"}).then(e=>{if(e.status>=200&&e.status<300)return{data:`result for ${t}`};throw new Error(e.statusText||`request failed with status ${e.status}`)})}const b=p(y,{maxCount:3,retryInterval:1e3,onFailed(t,[e]){let s=e;e instanceof Error&&(s=e.message),console.log(`\u7B2C${t}\u6B21\u5931\u8D25\u4E86\uFF1A`,s)},onRetry(t){console.log(`\u7B2C${t}\u6B21\u5C1D\u8BD5...`)}});var x=d({setup(){return()=>m("button",{onClick:async()=>{const t=await b("abc");console.log("fetched",t)}},[g("Get something unstable")])}});export{x as default};
