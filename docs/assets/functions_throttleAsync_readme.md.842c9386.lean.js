import{d as n,e as s,f as a,o as p,c as t,a as o}from"./app.d9cbc884.js";function e(n,{useSamePromise:s=!1}={}){let a=!1,p=null;return function(...t){if(a)return s&&p?p:new Promise((()=>{}));{const s=n.call(this,...t).then(((...n)=>(a=!1,p=null,Promise.resolve(...n)))).catch(((...n)=>(a=!1,p=null,Promise.reject(...n))));return p=s,a=!0,s}}}const c=e((function(n){return console.log("submiting",n),fetch("https://httpbin.org/delay/1.5",{body:JSON.stringify(n),method:"POST",mode:"cors"})}));var l=n({setup:()=>()=>s("fieldset",null,[s("legend",null,[a("提交场景 Submission Case")]),s("ul",null,[s("li",null,[a("背景：为防止用户重复提交，我们通常需要维护一个 loading 变量，当 loading 数量多起来就难搞了（我也想偷懒）。")]),s("li",null,[a("需求：不需要写 loading，也可以去重")]),s("li",null,[a("原文：https://github.com/bowencool/blog/issues/3")])]),s("button",{onClick:async()=>{await c({msg:"some data to be sent"}),console.log("submit completed")}},[a("submit(click me quickly)")])])});function r(n){console.log("fetching",n);const s=(.4+2*Math.random()).toFixed(3);return fetch(`https://httpbin.org/delay/${s}?keywords=${n}`,{method:"GET",mode:"cors"}).then((()=>({data:`result for ${n}`})))}const u=e(r),i=e(r,{useSamePromise:!0});var k=n({setup:()=>()=>s("fieldset",null,[s("legend",null,[a("查询场景 Query Case")]),s("ul",null,[s("li",null,[a("背景：多个地方需要同一份数据，往往调用（请求）多次。")]),s("li",null,[a("需求：执行（请求）一次，返回同一个结果给多个调用方。")])]),s("button",{onClick:async()=>{const n=await u("abc");console.log("fetched",n)}},[a("Get something same")]),s("button",{onClick:async()=>{const n=await i("abc");console.log("fetched",n)}},[a("Get something same(useSamePromise)")])])});const b=o('',9),m=o('',1),d=o('',3),g='{"title":"Intro","description":"","frontmatter":{},"headers":[{"level":2,"title":"Intro","slug":"intro"},{"level":2,"title":"Demo","slug":"demo"},{"level":2,"title":"Types","slug":"types"}],"relativePath":"functions/throttleAsync/readme.md","lastUpdated":1632292962193}',h={};const f=Object.assign(h,{setup:function(n){return(n,a)=>(p(),t("div",null,[b,s(l),m,s(k),d]))}});export{g as __pageData,f as default};
