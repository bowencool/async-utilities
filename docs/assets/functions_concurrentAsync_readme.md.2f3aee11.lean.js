import{d as n,e as s,F as a,f as p,o as t,c as o,b as e,a as c}from"./app.8e17d8fd.js";function l(n,s=3){let a;const p=[];let t=0;function o(){if(t>=s)return;const e=p.shift();e&&function([s,p,e]){t++,n.apply(a,s).then(((...n)=>{p(...n),t--,o()})).catch(((...n)=>{e(...n),t--,o()}))}(e)}return function(...n){a=this;const s=new Promise(((s,a)=>{p.push([n,s,a])}));return o(),s}}function u(n){const s=(1+3*Math.random()).toFixed(3);return console.log("fetch start:",n),fetch(`https://httpbin.org/delay/${s}?i=${n}`,{method:"GET",mode:"cors"}).then((()=>n))}var r=n({setup:()=>()=>s(a,null,[s("button",{onClick:()=>{for(let n=0;n<7;n++)u(n).then((s=>console.log("rez:",n,s)))}},[p("无限制并发请求 No Limit")]),s("button",{onClick:()=>{const n=l(u,2);for(let s=0;s<7;s++)n(s).then((n=>console.log("rez:",s,n)))}},[p("限制最大2个并发请求 Limit 2 concurrent")]),s("button",{onClick:()=>{const n=l(u,3);for(let s=0;s<7;s++)n(s).then((n=>console.log("rez:",s,n)))}},[p("限制最大3个并发请求 Limit 3 concurrent")])])});const i=e("h2",{id:"intro",tabindex:"-1"},[p("Intro "),e("a",{class:"header-anchor",href:"#intro","aria-hidden":"true"},"#")],-1),k=e("p",null,"一个限制最大（异步任务）并发的高阶函数。",-1),b=e("p",null,"A higher-order function that limits the maximum (asynchronous task) concurrency.",-1),m=e("h2",{id:"demo",tabindex:"-1"},[p("Demo "),e("a",{class:"header-anchor",href:"#demo","aria-hidden":"true"},"#")],-1),d=e("blockquote",null,[e("p",null,"以下 Demo 以网络请求为例，打开 Devtool 查看效果。"),e("p",null,"The following demo takes a network request as an example and opens Devtool to see the effect.")],-1),g=c('',3),h='{"title":"Intro","description":"","frontmatter":{},"headers":[{"level":2,"title":"Intro","slug":"intro"},{"level":2,"title":"Demo","slug":"demo"},{"level":2,"title":"Types","slug":"types"}],"relativePath":"functions/concurrentAsync/readme.md","lastUpdated":1631720621927}',f={};const y=Object.assign(f,{setup:function(n){return(n,a)=>(t(),o("div",null,[i,k,b,m,d,s(r),g]))}});export{h as __pageData,y as default};
